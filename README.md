## Система мониторинга самосвалов
Веб-приложение на Django для отслеживания загрузки самосвалов различных моделей, работающих в карьере. Система позволяет контролировать степень загрузки самосвалов относительно их максимальной грузоподъемности и выявлять случаи перегруза.

### Функциональность
- Отображение списка самосвалов с информацией о модели, максимальной грузоподъемности, текущей загрузке и проценте перегруза
- Фильтрация списка самосвалов по модели
- Выделение перегруженных самосвалов (загрузка > 100%)
- Утилиты командной строки для управления данными

### Структура проекта
```bash
README.md                        # Документация проекта
dump_trucks/                     # Основная директория проекта
    manage.py                    # Скрипт командной строки для управления проектом
    
    dump_trucks/                 # Пакет настроек проекта Django
        asgi.py                  # Конфигурация для ASGI-серверов (для асинхронных приложений)
        settings.py              # Основные настройки проекта (БД, приложения, middleware и т.д.)
        urls.py                  # Корневые URL-маршруты проекта
        wsgi.py                  # Конфигурация для WSGI-серверов (для развертывания)
    
    trucks/                      # Приложение для управления и мониторинга самосвалов
        admin.py                 # Настройки интерфейса администратора Django
        apps.py                  # Конфигурация приложения trucks
        models.py                # Определения моделей ORM (классы для работы с БД)
        tests.py                 # Модульные и интеграционные тесты
        urls.py                  # URL-маршруты для приложения
        views.py                 # Контроллеры для обработки запросов
        
        fixtures/
            initial_data.json    # Начальные данные о самосвалах в формате JSON
        
        management/              # Пользовательские команды
            commands/
                delete_data.py   # Удаление данных из БД
                insert_data.py   # Вставка тестовых данных
                view_data.py     # Просмотр данных в консоли
        
        migrations/              # Файлы миграций для управления схемой БД
        
        static/                  # Статические файлы приложения
            trucks/
                css/          
                    styles.css   # Стили CSS
        
        templates/               # HTML-шаблоны
            trucks/
                trucks_list.html # Шаблон страницы со списком самосвалов
```

### Предварительные требования
- Python 3.13
- Django 5.2.1
- Любая БД (SQLite, Postgres, MySQL, ...)
- HTML/CSS
- Проверено, что программа успешно запускается на Windows и MacOS

### Установка
- Клонировать репозиторий: `git clone https://github.com/ViktorMash/dump_trucks_django.git`
- Создать виртуальное окружение: `python -m venv venv` для Windows и Mac
- И активировать
- - `source venv/bin/activate` для Linux/Mac
- - `venv\Scripts\activate` для Windows
- Установить зависимости: `pip install -r requirements.txt`
- - Для разработки `pip install -r requirements-dev.txt`
- - Только для запуска проекта `pip install -r requirements.txt`

## Информация о базе данных
- Проект использует SQLite в качестве СУБД
- Перейти в каталог приложения `cd dump_trucks`
- Накатить миграции `python manage.py migrate` (Будет создан файл базы данных `db.sqlite3`)
- Добавить тестовые данные `python manage.py insert_data`

##### Примечание:
Если вы хотите использовать другую СУБД, 
вам потребуется изменить настройки подключения в файле `dump_trucks/settings.py` в секции DATABASES 
и установить соответствующие драйверы

### Запуск
- Перейти в каталог приложения `cd dump_trucks`
- Запустить сервер разработки: `python manage.py runserver`
- Рекомендуемый браузер - Google Chrome (в других браузерах тестирование не проводилось)
- Открыть в браузере: http://127.0.0.1:8000/
- Остановить сервер:
- - `control + C` для Linux/Mac
- - `CTRL + C`  # для Windows

### Веб-интерфейс
- Отображает таблицу со всеми самосвалами
- Позволяет фильтровать самосвалы по модели. Активация при нажатии кнопки **Применить**
- Показывает максимальную грузоподъемность, текущий вес и процент перегруза
- Выделяет перегруженные самосвалы красным цветом

### Если возникли проблемы:
- Убедитесь, что порт 8000 не занят другими приложениями
- Проверьте, что виртуальное окружение активировано
- Проверьте наличие всех необходимых пакетов

### Использование management команд
- Добавление тестовых данных `python manage.py insert_data`
- Просмотр данных `python manage.py view_data`
- Удаление данных `python manage.py delete_data` выбрать нужный пункт из меню


### Линтеры и форматтеры
Проект использует следующие инструменты для обеспечения качества кода:

- Black - форматер кода
- Flake8 - статический анализатор кода
- isort - сортировщик импортов


#### Запуск линтеров
- Запуск линтеров при каждом коммите:
- - Установите pre-commit хуки в локальный репозиторий: `pre-commit install`
- - Проверьте установку хуков: `pre-commit --version`

- Ручной запуск:
- - В Linux/Mac: `./lint.sh`
- - В Windows: `lint.bat`
